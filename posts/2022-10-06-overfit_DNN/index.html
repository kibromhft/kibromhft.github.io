<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>The Brutal Reality of Overfitting in Production ML: What Actually Works | Kb&#39;s Blog</title>
<meta name="keywords" content="overfitting, deep learning, production ML, regularization, dropout, early stopping, transfer learning, hyperparameter tuning" />
<meta name="description" content="Real-world overfitting disasters, proven solutions, and the brutal truth about what actually works in production ML systems.">
<meta name="author" content="kibrom Haftu">
<link rel="canonical" href="https://kibromhft.github.io/posts/2022-10-06-overfit_DNN/" />
<link crossorigin="anonymous" href="/assets/css/main.css?v=1.2" rel="stylesheet">
<link rel="preload" href="/assets/f/Essays1743.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/assets/f/Libertine.woff2" as="font" type="font/woff2" crossorigin>
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://kibromhft.github.io/favicon_peach.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://kibromhft.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kibromhft.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://kibromhft.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://kibromhft.github.io/safari-pinned-tab.svg">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<style>
        /* Optimized font-face declarations for custom fonts */
        @font-face {
            font-family: "Essays 1743";
            src: url("../../assets/f/Essays1743.woff2") format("woff2"), url("../../assets/f/Essays1743.woff") format("woff");
            font-display: swap;
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: "Essays 1743";
            src: url("../../assets/f/Essays1743-bold.woff2") format("woff2"), url("../../assets/f/Essays1743-bold.woff") format("woff");
            font-display: swap;
            font-weight: bold;
            font-style: normal;
        }
        @font-face {
            font-family: "Essays 1743";
            src: url("../../assets/f/Essays1743-italic.woff2") format("woff2"), url("../../assets/f/Essays1743-italic.woff") format("woff");
            font-display: swap;
            font-weight: normal;
            font-style: italic;
        }
        @font-face {
            font-family: "Essays 1743";
            src: url("../../assets/f/Essays1743-bold-italic.woff2") format("woff2"), url("../../assets/f/Essays1743-bold-italic.woff") format("woff");
            font-display: swap;
            font-weight: bold;
            font-style: italic;
        }
        @font-face {
            font-family: "Libertine";
            src: url("../../assets/f/Libertine.woff2") format("woff2"), url("../../assets/f/Libertine.woff") format("woff");
            font-display: swap;
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: "Libertine";
            src: url("../../assets/f/Libertine-bold.woff2") format("woff2"), url("../../assets/f/Libertine-bold.woff") format("woff");
            font-display: swap;
            font-weight: bold;
            font-style: normal;
        }
        @font-face {
            font-family: "Libertine";
            src: url("../../assets/f/Libertine-italic.woff2") format("woff2"), url("../../assets/f/Libertine-italic.woff") format("woff");
            font-display: swap;
            font-weight: normal;
            font-style: italic;
        }
        @font-face {
            font-family: "Libertine";
            src: url("../../assets/f/Libertine-bold-italic.woff2") format("woff2"), url("../../assets/f/Libertine-bold-italic.woff") format("woff");
            font-display: swap;
            font-weight: bold;
            font-style: italic;
        }
        
        /* Enhanced styles for quotes with CSS variables */
        .quote {
            background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary));
            border-left: 4px solid var(--primary-color);
            padding: 2rem 2rem 2rem 2.5rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-md);
            transition: var(--transition-base);
            border-radius: var(--radius-md);
            position: relative;
            overflow: hidden;
            font-size: 1.2em;
            font-style: italic;
        }

        .quote::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 20px 20px 0;
            border-color: transparent var(--primary-color) transparent transparent;
            opacity: 0.7;
        }

        .quote p {
            color: var(--text-primary);
            font-style: italic;
            font-size: 1.2em;
            margin: 0 0 1rem 0;
            line-height: 1.6;
            position: relative;
            z-index: 1;
            padding-left: 0;
            text-indent: 0;
        }

        .quote cite {
            color: var(--text-secondary);
            font-style: normal;
            font-size: 0.95em;
            display: block;
            text-align: right;
            margin-top: 1rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--border-color);
            font-weight: 500;
        }

        /* Quote hover effects */
        .quote:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .quote:hover::before {
            opacity: 0.5;
            transform: scale(1.1);
        }

        /* Dark mode specific quote styles */
        body.dark .quote {
            background-color: var(--bg-card);
            border-left-color: var(--primary-color);
            box-shadow: var(--shadow-sm);
        		}

		/* Enhanced paginav styling */
		.paginav {
			margin: 2rem 0;
			padding: 1.5rem;
			background: var(--bg-secondary);
			border-radius: var(--radius-md);
			border: 1px solid var(--border-color);
		}

		.paginav-header {
			text-align: center;
			margin-bottom: 1rem;
			padding-bottom: 0.5rem;
			border-bottom: 1px solid var(--border-color);
		}

		.paginav .title {
			text-align: center;
			display: block;
			cursor: default;
			outline: none;
			font-family: var(--font-heading);
			font-size: 13px;
			font-style: normal;
			font-variant: normal;
			font-weight: 600;
			letter-spacing: 1px;
			line-height: 30px;
			text-decoration: none;
			text-indent: 0px;
			text-transform: uppercase;
			vertical-align: baseline;
			white-space: normal;
			word-spacing: 0px;
			color: var(--text-secondary);
		}

		.paginav a {
			color: var(--primary-color);
			text-decoration: none;
			transition: var(--transition-base);
			display: block;
			padding: 8px 12px;
			border-radius: var(--radius-sm);
			margin-bottom: 0.5rem;
		}

		.paginav a:hover {
			background-color: var(--bg-primary);
			color: var(--primary-hover);
			transform: translateY(-1px);
			box-shadow: var(--shadow-sm);
		}

		.paginav span:not(.title) {
			color: var(--primary-color);
			font-family: var(--font-body);
			font-weight: 500;
			font-size: 1rem;
			line-height: 1.4;
			display: block;
			margin-top: 2px;
		}

		.paginav .subtitle {
			color: var(--primary-color);
			font-family: var(--font-body);
			font-weight: 500;
			font-size: 0.95rem;
			line-height: 1.3;
			display: block;
			margin-top: 1px;
			opacity: 0.9;
		}

		.paginav span:not(.title):hover {
			color: var(--primary-hover);
			text-decoration: underline;
		}

		/* Dark mode overrides for paginav */
		body.dark .paginav .title {
			color: var(--text-secondary) !important;
		}

		body.dark .paginav a {
			color: var(--primary-color);
		}

		body.dark .paginav a:hover {
			background-color: var(--bg-primary);
			color: var(--primary-hover);
		}

		body.dark .paginav span:not(.title) {
			color: var(--primary-color);
		}

		body.dark .paginav span:not(.title):hover {
			color: var(--primary-hover);
		}

		/* TOC styling - restore blue bullets from main.css and ensure proper spacing */
		.toc li::before {
			content: '•' !important;
			position: absolute !important;
			left: 0 !important;
			color: var(--brand-blue) !important;
			transition: all 0.2s ease !important;
		}

		.toc li {
			position: relative;
			padding-left: 1.2rem;
			list-style: none;
		}

		.toc {
			margin: 2rem 0;
			padding: 1.5rem;
			background: var(--bg-secondary);
			border-radius: var(--radius-md);
			border: 1px solid var(--border-color);
		}

		.toc summary {
			cursor: pointer;
			font-family: var(--font-heading);
			font-weight: 600;
			color: var(--text-primary);
			margin-bottom: 1rem;
			padding: 0.5rem 0;
			border-bottom: 2px solid var(--border-color);
		}

		.toc summary:hover {
			color: var(--primary-color);
		}

		.toc .inner {
			margin-top: 1rem;
		}

		.toc ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}

		.toc li {
			margin-bottom: 0.75rem;
		}

		.toc a {
			color: var(--text-secondary);
			font-family: var(--font-body);
			text-decoration: none;
			transition: var(--transition-base);
			display: block;
			padding: 0.25rem 0;
		}

		.toc a:hover {
			color: var(--primary-color);
			transform: translateX(4px);
		}

		/* Dark mode TOC */
		body.dark .toc {
			background: var(--bg-secondary);
			border-color: var(--border-color);
		}

		body.dark .toc summary {
			color: var(--text-primary);
		}

		body.dark .toc a {
			color: var(--text-secondary);
		}

		body.dark .toc a:hover {
			color: var(--primary-color);
		}
		</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-8161570-5', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="Causality in Machine Learning" />
<meta property="og:description" content="Overfitting is often perceived as a major challenge in DNNs, leading to a lack of confidence in their ability to generalize to new data. " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kibromhft.github.io/posts/2022-10-06-overfit_DNN/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-06T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-10-06T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Demystifying Overfitting in Deep Neural Networks: Separating Fact from Fiction"/>
<meta name="twitter:description" content="Overfitting is often perceived as a major challenge in DNNs, leading to a lack of confidence in their ability to generalize to new data."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://kibromhft.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Causality in Machine Learning",
      "item": "https://kibromhft.github.io/posts/2022-10-06-overfit_DNN/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Causality in Machine Learning",
  "name": "Causality in Machine Learning",
  "description": "In ML, we often focus on the relationship between inputs and outputs. But, have you ever wondered if there is more to the story? Are there underlying relationships between variables that we're missing? It is here that causality comes into play. Causality refers to the relationship between an event (the cause) and a second event (the effect), where the second event is a result of the first. Understanding causality is crucial for making accurate predictions and informed decisions. By taking into account the causal relationships between variables, we can improve the performance of our models and gain deeper insights into the underlying mechanisms that generate the data.",
  "keywords": [
    "data", "active-learning"
  ],
  "articleBody": "In ML, we often focus on the relationship between inputs and outputs. But, have you ever wondered if there is more to the story? Are there underlying relationships between variables that we're missing? It is here that causality comes into play. Causality refers to the relationship between an event (the cause) and a second event (the effect), where the second event is a result of the first. Understanding causality is crucial for making accurate predictions and informed decisions. By taking into account the causal relationships between variables, we can improve the performance of our models and gain deeper insights into the underlying mechanisms that generate the data..\n",
  "wordCount" : "4584",
  "inLanguage": "en",
  "datePublished": "2022-10-06T00:00:00Z",
  "dateModified": "2022-10-06T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "kibrom Haftu"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kibromhft.github.io/posts/2022-10-06-overfit_DNN/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Lil'Log",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kibromhft.github.io/favicon_peach.ico"
    }
  }
}
</script>

<style>
		/* Design System - CSS Custom Properties */
		:root {
			/* Colors - using main theme variables */
			--primary-color: var(--brand-blue, rgb(13, 110, 253));
			--primary-hover: var(--brand-blue-hover, rgb(10, 88, 202));
			--primary-light: rgb(59, 130, 246);
			--brand-blue: rgb(13, 110, 253);
			--brand-blue-hover: rgb(10, 88, 202);
			--text-primary: var(--primary, rgb(15, 23, 42));
			--text-secondary: var(--secondary, rgb(51, 65, 85));
			--text-muted: rgb(108, 117, 125);
			--bg-primary: var(--theme, rgb(255, 255, 255));
			--bg-secondary: var(--entry, rgb(248, 250, 252));
			--bg-card: var(--entry, rgb(255, 255, 255));
			--code-bg: rgb(255, 255, 255);
			--border-color: var(--border, rgba(226, 232, 240, 0.8));
			--shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
			--shadow-md: 0 4px 6px rgba(0, 0, 0, 0.02);
			--shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.03);
			--shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.05);
			
			/* Typography */
			--font-heading: "Essays 1743", serif;
			--font-body: Libertine, Palatino, "Palatino Linotype", "Book Antiqua", Georgia, "Times New Roman", serif;
			--font-primary: "Essays 1743", serif;
			--font-mono: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace;
			--font-size-xs: 0.875rem;
			--font-size-sm: 1rem;
			--font-size-base: 1.1rem;
			--font-size-lg: 1.25rem;
			--font-size-xl: 1.4rem;
			--font-size-2xl: 2rem;
			--font-size-3xl: 3.5rem;
			
			/* Spacing */
			--space-xs: 0.5rem;
			--space-sm: 1rem;
			--space-md: 1.5rem;
			--space-lg: 2rem;
			--space-xl: 2.5rem;
			--space-2xl: 3rem;
			--space-3xl: 4rem;
			
			/* Border radius */
			--radius-sm: 8px;
			--radius-md: 12px;
			--radius-lg: 16px;
			
			/* Transitions */
			--transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
			--transition-base: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			--transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
			
			/* Container */
			--container-max-width: min(900px, 90vw);
			--container-padding: clamp(1rem, 5vw, 2rem);
		}

		/* Dark mode variables - using main theme system */
		body.dark {
			--primary-color: rgb(34, 211, 238);
			--primary-hover: rgb(6, 182, 212);
			--primary-light: rgb(6, 182, 212);
			--brand-blue: rgb(34, 211, 238);
			--brand-blue-hover: rgb(6, 182, 212);
			--text-primary: var(--primary, rgb(248, 250, 252));
			--text-secondary: var(--secondary, rgb(203, 213, 225));
			--text-muted: rgb(156, 163, 175);
			--bg-primary: var(--theme, rgb(15, 23, 42));
			--bg-secondary: var(--entry, rgb(30, 41, 59));
			--bg-card: var(--entry, rgb(30, 41, 59));
			--code-bg: rgb(30, 41, 59);
			--border-color: var(--border, rgba(51, 65, 85, 0.8));
			--shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
			--shadow-md: 0 4px 6px rgba(0, 0, 0, 0.2);
			--shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
			--shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
		}

		/* Reduced motion support */
		@media (prefers-reduced-motion: reduce) {
			:root {
				--transition-fast: 0s;
				--transition-base: 0s;
				--transition-slow: 0s;
			}
			
			* {
				animation-duration: 0.01ms !important;
				animation-iteration-count: 1 !important;
				transition-duration: 0.01ms !important;
			}
		}

		/* Navigation styles with CSS variables */
		#menu a {
			color: var(--text-primary);
			transition: var(--transition-base);
			font-family: var(--font-body);
			font-size: var(--font-size-base);
		}

		#menu a:hover,
		#menu a:focus {
			background-color: var(--bg-secondary);
			color: var(--text-primary);
			outline: 2px solid var(--primary-color);
			outline-offset: 2px;
		}

		.dropdown-menu a {
			color: var(--text-primary);
			transition: var(--transition-base);
			font-family: var(--font-body);
			font-size: var(--font-size-base);
		}

		.dropdown-menu a:hover,
		.dropdown-menu a:focus {
			background-color: var(--bg-secondary);
			color: var(--primary-color);
		}

		/* Logo and theme toggle */
		.logo a {
			color: var(--text-primary);
			transition: var(--transition-base);
			font-family: var(--font-heading);
			font-size: var(--font-size-lg);
			font-weight: 600;
		}

		.logo a:hover,
		.logo a:focus {
			color: var(--primary-color);
			outline: 2px solid var(--primary-color);
			outline-offset: 2px;
		}

		#theme-toggle {
			background: none;
			border: none;
			cursor: pointer;
			padding: var(--space-xs);
			border-radius: 50%;
			transition: var(--transition-base);
			color: var(--text-primary);
			display: flex;
			align-items: center;
			justify-content: center;
		}

		#theme-toggle:hover,
		#theme-toggle:focus {
			background-color: var(--bg-secondary);
			outline: 2px solid var(--primary-color);
			outline-offset: 2px;
		}

		#theme-toggle svg {
			height: 20px;
			width: 20px;
		}

		.logo-switches {
			display: flex;
			align-items: center;
			margin-left: var(--space-sm);
		}

		.logo {
			display: flex;
			align-items: center;
			position: relative;
		}

		/* Theme toggle visibility */
		body.dark #moon {
			display: none;
		}

		body:not(.dark) #sun {
			display: none;
		}

		/* Container and layout with CSS variables */
		.post-content {
			color: var(--text-primary);
			max-width: var(--container-max-width);
			margin: 0 auto;
			padding: 0 var(--container-padding);
			font-family: var(--font-body);
			font-size: var(--font-size-base);
			line-height: 1.8;
			text-align: justify;
		}

		/* Enhanced paragraph spacing and readability */
		.post-content p {
			margin-bottom: 1.5rem;
			text-align: justify;
			hyphens: auto;
			word-break: normal;
		}

		/* Better list styling */
		.post-content ol, .post-content ul {
			margin: 1.5rem 0;
			padding-left: 2rem;
		}

		.post-content li {
			margin-bottom: 0.75rem;
			line-height: 1.6;
		}

		.post-content ol li {
			padding-left: 0.5rem;
		}

		.post-content ul li {
			list-style-type: disc;
		}

		/* Enhanced section headers */
		.post-content h1, .post-content h2, .post-content h3 {
			margin-top: 3rem;
			margin-bottom: 1.5rem;
			padding-bottom: 0.5rem;
			border-bottom: 2px solid var(--border-color);
			position: relative;
			transition: var(--transition-base);
		}

		.post-content h1::after, .post-content h2::after, .post-content h3::after {
			content: '';
			position: absolute;
			bottom: -2px;
			left: 0;
			width: 60px;
			height: 2px;
			background: var(--primary-color);
			transition: width var(--transition-base);
		}

		.post-content h1:hover::after, .post-content h2:hover::after, .post-content h3:hover::after {
			width: 100px;
		}

		.post-content h1:hover, .post-content h2:hover, .post-content h3:hover {
			color: var(--primary-color);
			transform: translateX(4px);
		}

		/* Enhanced list styling */
		.post-content ol li, .post-content ul li {
			position: relative;
			padding-left: 1rem;
		}

		.post-content ol li::marker {
			color: var(--primary-color);
			font-weight: bold;
		}

		.post-content ul li::marker {
			color: var(--primary-color);
		}

		/* Enhanced blockquote styling */
		.post-content blockquote {
			border-left: 4px solid var(--primary-color);
			padding: 1.5rem;
			margin: 2rem 0;
			font-style: italic;
			color: var(--text-secondary);
			background: var(--bg-secondary);
			border-radius: var(--radius-sm);
		}

		/* Container queries for responsive design */
		@container (max-width: 600px) {
			.post-content {
				font-size: var(--font-size-sm);
				padding: 0 var(--space-sm);
			}
		}

		/* Responsive design improvements */
		@media screen and (max-width: 768px) {
			.post-content {
				font-size: var(--font-size-sm);
				padding: 0 var(--space-sm);
			}

			.quote {
				margin: 1rem 0;
				padding: 1rem;
			}

			.quote p {
				font-size: 1em;
			}

			/* Mobile skills list improvements */
			#skills + p + ol {
				padding-left: 1rem;
			}

			#skills + p + ol li {
				padding-left: 1.5rem;
				margin-bottom: 1rem;
			}

			/* Override text-align: justify for mobile */
			#skills + p + ol li.custom-paragraph {
				text-align: left !important;
			}

			/* Ensure proper mobile spacing for custom paragraphs */
			.custom-paragraph {
				margin: 1rem 0;
				text-align: left !important;
			}

			/* Mobile paginav improvements */
			.paginav {
				margin: 8px 0;
			}

			.paginav .title {
				font-size: 12px;
				line-height: 1.2;
			}

			.paginav .subtitle {
				font-size: 0.9rem;
				line-height: 1.2;
				margin-top: 1px;
			}
		}

		@media screen and (max-width: 480px) {
			.post-content {
				font-size: var(--font-size-xs);
				padding: 0 var(--space-xs);
			}

			.copy-code {
				font-size: 10px;
				padding: 4px 8px;
			}

			/* Small mobile skills list improvements */
			#skills + p + ol {
				padding-left: 0.5rem;
			}

			#skills + p + ol li {
				padding-left: 1rem;
				margin-bottom: 0.75rem;
			}

			/* Override text-align: justify for small mobile */
			#skills + p + ol li.custom-paragraph {
				text-align: left !important;
			}

			/* Ensure proper mobile spacing for custom paragraphs */
			.custom-paragraph {
				margin: 0.75rem 0;
				text-align: left !important;
			}

			/* Mobile header improvements */
			.post-header {
				padding: 1rem 0;
				text-align: center;
			}

			.post-title {
				font-size: 2.5rem;
				margin: 0.5rem 0;
				line-height: 1.2;
			}

			.post-meta {
				font-size: 0.9rem;
				margin: 0.5rem 0;
			}

			/* Improve mobile content spacing */
			.post-content {
				padding: 0 1rem;
			}

			/* Mobile paginav improvements */
			.paginav {
				margin: 6px 0;
			}

			.paginav .title {
				font-size: 11px;
				line-height: 1.1;
			}

			.paginav .subtitle {
				font-size: 0.85rem;
				line-height: 1.1;
				margin-top: 0.5px;
			}
		}

		/* Enhanced link styling with focus states */
		.post-content a {
			color: var(--primary-color);
			text-decoration: none;
			transition: var(--transition-base);
			position: relative;
			font-family: var(--font-body);
			font-weight: 500;
			border-radius: 2px;
			padding: 2px 4px;
			margin: 0 2px;
		}

		.post-content a::after {
			content: '';
			position: absolute;
			bottom: -2px;
			left: 0;
			width: 0;
			height: 2px;
			background: linear-gradient(90deg, var(--primary-color), var(--primary-hover));
			transition: width var(--transition-base);
			border-radius: 1px;
		}

		.post-content a:hover::after,
		.post-content a:focus::after {
			width: 100%;
		}

		.post-content a:hover,
		.post-content a:focus {
			color: var(--primary-hover);
			background: var(--bg-secondary);
			border-radius: 4px;
			transform: translateY(-1px);
			box-shadow: var(--shadow-sm);
		}

		/* External link indicators */
		.post-content a[href^="http"]::before {
			content: '↗';
			margin-right: 4px;
			font-size: 0.8em;
			opacity: 0.7;
			transition: var(--transition-base);
		}

		.post-content a[href^="http"]:hover::before {
			opacity: 1;
			transform: translateX(2px);
		}

		/* Post content dark mode fixes */
		.post-content {
			color: var(--text-primary) !important;
		}

		.post-content p {
			color: var(--text-primary) !important;
		}

		.post-content h1,
		.post-content h2,
		.post-content h3,
		.post-content h4,
		.post-content h5,
		.post-content h6 {
			color: var(--text-primary) !important;
		}

		/* Ensure body text uses our custom variables */
		body {
			color: var(--text-primary) !important;
			background: var(--bg-primary) !important;
		}

		/* Dark mode specific overrides */
		body.dark .post-content {
			color: var(--text-primary) !important;
		}

		body.dark .post-content p {
			color: var(--text-primary) !important;
		}

		body.dark .post-content h1,
		body.dark .post-content h2,
		body.dark .post-content h3,
		body.dark .post-content h4,
		body.dark .post-content h5,
		body.dark .post-content h6 {
			color: var(--text-primary) !important;
		}

		/* Copy button styling */
		.copy-code {
			position: absolute;
			top: 8px;
			right: 8px;
			background: var(--primary-color);
			color: white;
			border: none;
			border-radius: var(--radius-sm);
			padding: 6px 12px;
			font-size: 12px;
			font-weight: 500;
			cursor: pointer;
			transition: var(--transition-base);
			opacity: 0;
			z-index: 10;
			box-shadow: var(--shadow-sm);
		}

		.copy-code:hover {
			background: var(--primary-hover);
			transform: translateY(-1px);
			box-shadow: var(--shadow-md);
		}

		pre:hover .copy-code {
			opacity: 1;
		}

		.copy-code:focus {
			outline: 2px solid var(--primary-color);
			outline-offset: 2px;
			opacity: 1;
		}

		/* Ensure pre elements have relative positioning for copy button */
		pre {
			position: relative;
		}

		/* Dark mode copy button */
		body.dark .copy-code {
			background: var(--primary-color);
			color: var(--bg-primary);
		}

		body.dark .copy-code:hover {
			background: var(--primary-hover);
		}

		/* Show copy button on focus for accessibility */
		pre:focus-within .copy-code {
			opacity: 1;
		}

		/* Share buttons styling */
		.share-buttons {
			display: flex;
			gap: 1rem;
			margin: 2rem 0;
			justify-content: center;
			flex-wrap: wrap;
		}

		.share-buttons a {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 40px;
			height: 40px;
			background: var(--bg-secondary);
			color: var(--text-secondary);
			border-radius: 50%;
			transition: var(--transition-base);
			border: 1px solid var(--border-color);
		}

		.share-buttons a:hover {
			background: var(--primary-color);
			color: var(--bg-primary);
			transform: translateY(-2px);
			box-shadow: var(--shadow-md);
		}

		.share-buttons svg {
			width: 20px;
			height: 20px;
		}

		/* Reading Progress Bar */
		.reading-progress {
			position: relative;
			width: 100%;
			height: 2px;
			background: var(--border-color);
			border-radius: 1px;
			margin: 0.5rem 0;
			overflow: hidden;
		}

		.progress-bar {
			height: 100%;
			background: linear-gradient(90deg, var(--primary-color), var(--primary-hover));
			width: 0%;
			transition: width var(--transition-base);
			border-radius: 1px;
			box-shadow: 0 0 5px rgba(0, 123, 255, 0.2);
		}

		/* Enhanced post header styling */
		.post-header {
			text-align: center;
			margin-bottom: 1rem;
			padding-bottom: 0.5rem;
			margin-top: 0.5rem;
			position: relative;
		}

		.post-title {
			font-family: var(--font-heading);
			font-size: var(--font-size-2xl);
			margin-bottom: 1rem;
			color: var(--text-primary);
			transition: var(--transition-base);
			position: relative;
		}

		.post-title:hover {
			transform: translateY(-2px) scale(1.02);
		}

		/* Add underline like FAQ page */
		.post-title::after {
			content: '';
			position: absolute;
			bottom: -8px;
			left: 50%;
			transform: translateX(-50%);
			width: 160px;
			height: 2px;
			background: linear-gradient(90deg, rgb(13, 110, 253) 0%, rgb(59, 130, 246) 50%, rgb(10, 88, 202) 100%);
			border-radius: 1px;
			transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
			opacity: 0;
			transform: translateX(-50%) scaleX(0);
			transform-origin: center;
		}

		.post-title:hover::after {
			opacity: 1;
			transform: translateX(-50%) scaleX(1);
			height: 3px;
		}

		/* Animate underline on page load */
		.post-title.loaded::after {
			opacity: 1;
			transform: translateX(-50%) scaleX(1);
		}

		/* Dark mode underline */
		body.dark .post-title::after {
			background: linear-gradient(90deg, rgb(34, 211, 238) 0%, rgb(6, 182, 212) 50%, rgb(8, 145, 178) 100%);
			box-shadow: 0 2px 8px rgba(34, 211, 238, 0.3);
		}

		.post-meta {
			color: var(--primary-color);
			font-family: var(--font-body);
			font-size: 14px;
			display: flex;
			flex-wrap: wrap;
			margin-bottom: 1rem;
			justify-content: center;
			align-items: center;
		}

		.post-meta:hover {
			color: var(--primary-hover);
		}

		/* Post tags styling */
		.post-tags {
			margin: 2rem 0;
		}

		.post-tags ul {
			list-style: none;
			padding: 0;
			margin: 0;
			display: flex;
			flex-wrap: wrap;
			gap: 0.5rem;
		}

		.post-tags li {
			margin: 0;
		}

		.post-tags a {
			display: inline-block;
			padding: 0.25rem 0.75rem;
			background: var(--bg-secondary);
			color: var(--primary-color);
			text-decoration: none;
			border-radius: var(--radius-sm);
			font-family: var(--font-body);
			font-size: var(--font-size-sm);
			transition: var(--transition-base);
			border: 1px solid var(--border-color);
		}

		.post-tags a:hover {
			background: var(--primary-color);
			color: var(--bg-primary);
			transform: translateY(-1px);
			box-shadow: var(--shadow-sm);
		}

		/* Footer styling */
		.footer {
			text-align: center;
			padding: 2rem 0;
			margin-top: 3rem;
			border-top: 1px solid var(--border-color);
			color: var(--text-secondary);
			font-family: var(--font-body);
		}

		.footer a {
			color: var(--primary-color);
			text-decoration: none;
			transition: var(--transition-base);
		}

		.footer a:hover {
			color: var(--primary-hover);
			text-decoration: underline;
		}

		/* Print styles */
		@media print {
			.header,
			.footer,
			.top-link,
			.copy-code,
			#theme-toggle {
				display: none !important;
			}

			.post-content {
				font-size: 12pt;
				line-height: 1.4;
				color: #000 !important;
				background: #fff !important;
			}

			a {
				color: #000 !important;
				text-decoration: underline;
			}

			h1, h2, h3, h4, h5, h6 {
				color: #000 !important;
				page-break-after: avoid;
			}
		}
		</style>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };

  window.addEventListener('load', (event) => {
      document.querySelectorAll("mjx-container").forEach(function(x){
        x.parentElement.classList += 'has-jax'})
    });

</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kibromhft.github.io/" accesskey="h" title="Kb&#39;s Blog (Alt + H)">Kb&#39;s Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
       <ul id="menu">

		
		  <li>
			<a href="https://kibromhft.github.io/" title="Home">
			  Home <span class="caret fa fa-home"></span>
			</a>
		  </li>
		  

		  <li>
			<a href="https://kibromhft.github.io/archives/" title="Archives">
			  <span>Archives</span>
			</a>
		  </li>
		  


		  <li>
			<a href="https://kibromhft.github.io/data/" title="Data">
			  <span>Data</span>
			</a>
		  </li>
		  <li>
			<a href="https://kibromhft.github.io/keywords/" title="keywords">
			  <span>Keywords</span>
			</a>
		  </li>
		  <li>
			<a href="https://kibromhft.github.io/faq" title="FAQ">
			  <span>FAQs</span>
			</a>
		  </li>
		  
<!-- 		  <li>
			<a href="https://kibromhft.github.io/cv" title="cv">
			  <span>CV</span>
			</a>
		  </li> -->

		<li class="dropdown">
			<a href="#" class="dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false">
			  Resources <span class="caret fa fa-chevron-down"></span>
			</a>
		  <ul class="dropdown-menu custom-dropdown">
			<li>
			  <a href="https://kibromhft.github.io/podcast">Podcast</a>
			</li>
			<li>
			  <a href="#">Algorithms</a>
			</li>
			<li>
			  <a href="#">Funding & Grants</a>
			</li>
			<li>
			  <a href="#">Startup Toolkit</a>
			</li>
		  </ul>
		</li>

		<style>
		.custom-dropdown {
		  padding: 8px 0 !important;
		  margin: 0 !important;
		  list-style-type: none !important;
		  /* Removed min-width to allow natural width */
		}

		.custom-dropdown li {
		  padding: 0 !important;
		  margin: 0 !important;
		}

		.custom-dropdown li a {
		  display: block !important;
		  width: 100% !important;
		  padding: 8px 20px !important;
		  margin: 0 !important;
		  box-sizing: border-box !important;
		  text-decoration: none !important;
		  color: var(--text-primary) !important;
		  font-family: var(--font-body) !important;
		  font-size: var(--font-size-base) !important;
		  line-height: 1.5 !important;
		  transition: var(--transition-base) !important;
		}

		.custom-dropdown li a:hover {
		  background-color: var(--bg-secondary) !important;
		  color: var(--primary-color) !important;
		}

		/* Enhanced dropdown styles */
		.dropdown-menu {
			background: var(--bg-primary);
			border: 1px solid var(--border-color);
			border-radius: var(--radius-sm);
			box-shadow: var(--shadow-lg);
			padding: 0.5rem 0;
			min-width: 200px;
			position: absolute;
			top: 100%;
			left: 0;
			z-index: 1000;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-8px);
			transition: all 0.2s ease;
		}

		.dropdown:hover .dropdown-menu {
			opacity: 1;
			visibility: visible;
			transform: translateY(0);
		}

		.dropdown-menu li {
			margin: 0;
		}

		.dropdown-menu a {
			display: block;
			padding: 0.75rem 1rem;
			color: var(--text-primary);
			text-decoration: none;
			transition: var(--transition-base);
			border-radius: 0;
		}

		.dropdown-menu a:hover {
			background-color: var(--bg-secondary);
			color: var(--primary-color);
		}

		/* Mobile-specific overrides to match keywords page behavior */
		@media screen and (max-width: 768px) {
			/* Override main.css mobile navigation with keywords-style behavior */
			.nav {
				padding: 0 16px !important;
				gap: 16px !important;
				/* Remove complex flex overrides that cause horizontal lines */
				display: flex !important;
				align-items: center !important;
				flex-wrap: wrap !important;
				overflow: visible !important;
				white-space: normal !important;
				/* Override max-width constraints */
				max-width: none !important;
			}

			#menu {
				gap: 6px !important;
				/* Remove overflow-x that causes horizontal lines */
				overflow: visible !important;
				white-space: normal !important;
				display: flex !important;
				flex-direction: row !important;
				flex-wrap: wrap !important;
			}

			#menu li {
				/* Remove inline-block that causes layout issues */
				display: flex !important;
				white-space: normal !important;
				flex-shrink: 1 !important;
			}

			#menu a {
				font-family: var(--font-body) !important;
				font-size: 15px !important;
				padding: 8px 12px !important;
				border-radius: 6px !important;
				white-space: normal !important;
				word-wrap: break-word !important;
				overflow-wrap: break-word !important;
			}

			.dropdown-menu {
				right: auto !important;
				left: 0 !important;
				min-width: 200px !important;
				border-radius: 8px !important;
			}

			/* Completely disable hover behavior on touch devices */
			.dropdown .dropdown-menu {
				opacity: 0 !important;
				visibility: hidden !important;
				transform: translateY(-8px) !important;
			}

			/* Show dropdown when dropdown-open class is present */
			.dropdown.dropdown-open .dropdown-menu {
				opacity: 1 !important;
				visibility: visible !important;
				transform: translateY(0) !important;
			}

			/* Rotate caret when dropdown is open */
			.dropdown.dropdown-open .caret {
				transform: rotate(180deg) !important;
			}
		}

		@media screen and (max-width: 480px) {
			.nav {
				flex-direction: row !important;
				padding: 0 16px !important;
				display: flex !important;
				align-items: center !important;
				flex-wrap: wrap !important;
				max-width: none !important;
			}

			.logo {
				margin-bottom: 0 !important;
			}

			#menu {
				flex-wrap: wrap !important;
				justify-content: flex-start !important;
				gap: 6px !important;
				display: flex !important;
				flex-direction: row !important;
			}

			#menu a {
				font-family: var(--font-body) !important;
				font-size: 14px !important;
				padding: 6px 12px !important;
				white-space: normal !important;
				word-wrap: break-word !important;
				overflow-wrap: break-word !important;
			}

			/* Mobile dropdown functionality for smaller screens */
			.dropdown .dropdown-menu {
				opacity: 0 !important;
				visibility: hidden !important;
				transform: translateY(-8px) !important;
			}

			.dropdown.dropdown-open .dropdown-menu {
				opacity: 1 !important;
				visibility: visible !important;
				transform: translateY(0) !important;
			}
		}
		</style>

		<style>
		/* New styles for paragraphs with CSS variables */
		.custom-paragraph {
			font-family: var(--font-body);
			font-size: var(--font-size-base);
			line-height: 1.556;
			word-spacing: 0.1em;
			margin: 28.008px 0px;
			color: var(--text-primary);
			transition: var(--transition-base);
		}
		
		/* headers with CSS variables */
		h1, h2, h3, h4, caption, thead th {
		  font-family: var(--font-heading);
		  font-weight: normal;
		  color: var(--text-primary);
		  text-shadow: 0 0 1px var(--text-secondary);
		}
		h1 {
		  font-size: var(--font-size-3xl);
		  line-height: 1.1;
		  width: 100%;
		  margin: 1.49em 0;
		}
		h2 {
		  font-size: var(--font-size-2xl);
		  line-height: 1.3125;
		  margin: 1.167em 0;
		  clear: both;
		}
		h3 {
		  font-size: var(--font-size-xl);
		  line-height: 1.167;
		  margin: 1.556em 0;
		  color: var(--text-primary);
		  font-weight: 600;
		}

		h4 {
		  font-size: var(--font-size-lg);
		  line-height: 1.3;
		  margin: 1.2em 0;
		  color: var(--text-primary);
		  font-weight: 500;
		}
		</style>

		</ul>

		
    </nav>
</header>


<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      The Brutal Reality of Overfitting in Production ML: What Actually Works
    </h1>
    <div class="post-meta"><span title='2022-10-06 00:00:00 +0000 UTC'>October 6, 2022</span>&nbsp;·&nbsp;12 min&nbsp;·&nbsp;kibrom Haftu</div>

    <!-- Reading Progress Bar -->
    <div class="reading-progress">
      <div class="progress-bar" id="reading-progress"></div>
</div>
  </header> 

<div class="toc" role="navigation" aria-label="Table of contents">
    <details>
        <summary accesskey="c" title="(Alt + C)" role="button" aria-expanded="false">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#overfitting" aria-label="overfitting">What is overfitting?</a>
                </li>
                <li>
                    <a href="#severity" aria-label="severity">Severity of overfitting in DNNs</a>
                </li>
                <li>
                    <a href="#techniques" aria-label="techniques">Techniques to Address Overfitting</a>
                </li>
                <li>
                    <a href="#architecture" aria-label="architecture">The Impact of Architecture Design</a>
                </li>
                <li>
                    <a href="#transfer" aria-label="transfer">Transfer Learning</a>
                </li>
                <li>
                    <a href="#hyperparameters" aria-label="hyperparameters">Hyperparameter Tuning</a>
                </li>
                <li>
                    <a href="#ensembling" aria-label="ensembling">Model Ensembling</a>
                </li>
                <li>
                    <a href="#conclusion" aria-label="conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content">
  
<p>Overfitting in deep neural networks represents a fundamental challenge in machine learning that affects model generalization and real-world performance. While often discussed in academic contexts, its practical implications extend to production systems where model performance directly impacts business outcomes.</p>

<p>This post examines the mechanisms of overfitting in DNNs, practical techniques for mitigation, and the relationship between model complexity and generalization performance. The focus is on empirically validated methods rather than theoretical speculation.</p>

<h2 id="overfitting">Understanding Overfitting in Practice</h2>

<p>Overfitting occurs when a model learns to memorize training data rather than capturing underlying patterns that generalize to new data. This section examines a concrete example to illustrate the concept.</p>

<p>Consider a credit scoring model with the following performance metrics:</p>

<ul>
<li><strong>Training accuracy:</strong> 98.7%</li>
<li><strong>Validation accuracy:</strong> 94.2%</li>
<li><strong>Production accuracy after 3 months:</strong> 67.3%</li>
</ul>

<p>The significant gap between training and validation accuracy (4.5%) indicates overfitting. The further degradation in production (26.9%) demonstrates the model's inability to generalize beyond the training distribution. This occurs when the model learns noise or dataset-specific patterns rather than fundamental relationships in the data.</p>

<h3>Mathematical Framework</h3>

<p>The expected prediction error can be decomposed using the bias-variance decomposition:</p>

<p><em>E[(y - ŷ)²] = Bias²(ŷ) + Var(ŷ) + σ²</em></p>

<p>Where Bias²(ŷ) represents the model's systematic error, Var(ŷ) represents the model's sensitivity to training data variations, and σ² represents irreducible noise. In overfitting scenarios, the variance term becomes dominant, indicating the model's excessive sensitivity to training data specifics.</p>

<p>Consider a model with the following loss progression:</p>

<ul>
<li><strong>Training loss:</strong> 0.023</li>
<li><strong>Validation loss:</strong> 0.156</li>
<li><strong>Production loss after 6 months:</strong> 0.847</li>
</ul>

<p>The 6.8x increase from training to validation loss indicates overfitting, while the further 5.4x increase in production demonstrates continued degradation. This pattern suggests the model learned dataset-specific features that don't generalize to new data distributions.</p>

<h2 id="severity">DNN Vulnerability to Overfitting</h2>

<p>Deep neural networks exhibit particular susceptibility to overfitting due to their architectural characteristics and parameter space properties.</p>

<h3>Parameter-to-Data Ratio</h3>

<p>Modern architectures contain substantial parameter counts. GPT-3 contains 175 billion parameters, while BERT-base contains 110 million parameters. The relationship between parameters and training data significantly influences overfitting risk.</p>

<p>Empirical evidence suggests that approximately 10 training examples per parameter represents a minimum threshold for avoiding overfitting. For BERT-base, this translates to approximately 1.1 billion training examples. Most practical applications operate with significantly fewer examples (typically 100K-1M), creating substantial overfitting risk.</p>

<h3>Case Study: Image Classification Performance</h3>

<p>An image classifier for manufacturing defects demonstrates the parameter-to-data ratio problem:</p>

<ul>
<li><strong>Training data:</strong> 50,000 images</li>
<li><strong>Model:</strong> ResNet-152 (23.5M parameters)</li>
<li><strong>Training accuracy:</strong> 99.2%</li>
<li><strong>Production accuracy:</strong> 73.1%</li>
</ul>

<p>The model operated with approximately 470 training examples per parameter, significantly below the recommended threshold. This resulted in memorization of training data characteristics rather than learning generalizable defect detection patterns, leading to poor performance on novel defect types.</p>

<h2 id="techniques">Effective Overfitting Mitigation Techniques</h2>

<p>Several regularization and training techniques have demonstrated effectiveness in reducing overfitting in deep neural networks.</p>

<h3>1. Dropout Regularization</h3>

<p>Dropout operates by randomly setting activations to zero during training with probability p, forcing the network to learn redundant representations. At inference time, weights are scaled by (1-p), effectively performing model averaging.</p>

<p>Empirical evidence suggests optimal dropout rates of p=0.5 for fully connected layers and p=0.2 for convolutional layers. Dropout has become a standard component in most production DNN architectures due to its effectiveness and computational efficiency.</p>

<p>Research demonstrates that dropout can improve generalization performance. For instance, adding dropout to a speech recognition model improved production accuracy from 87% to 93%, despite reducing training accuracy from 99.1% to 95.3%.</p>

<h3>2. Early Stopping</h3>

<p>Early stopping prevents overfitting by monitoring validation performance and terminating training when improvement ceases. This technique addresses the common problem of excessive training epochs.</p>

<p>Implementation typically involves stopping training when validation loss fails to improve for a specified number of epochs (commonly 10). Empirical studies show that many models achieve optimal generalization performance well before reaching maximum training epochs.</p>

<p>For example, a recommendation system trained for 300 epochs achieved 98.9% training accuracy but only 89.2% production accuracy. Retraining with early stopping at epoch 47 improved production accuracy to 94.7%, demonstrating the effectiveness of this approach.</p>

<h3>3. Data Augmentation</h3>

<p>Data augmentation increases effective training data size by applying transformations that preserve semantic meaning. The effectiveness depends on the quality and realism of augmentations rather than quantity alone.</p>

<p><strong>Computer Vision:</strong> Effective augmentations include:</p>
<ul>
<li>Color jittering (±20% brightness, ±15% contrast)</li>
<li>Random erasing (cutout with 0.1-0.3 probability)</li>
<li>Mixup (α=0.2 for image mixing)</li>
</ul>

<p><strong>Natural Language Processing:</strong> Advanced augmentation techniques include:</p>
<ul>
<li>Back-translation (English → French → English)</li>
<li>EDA (Easy Data Augmentation) with p=0.1</li>
<li>Contextual augmentation with BERT</li>
</ul>

<p>Optimal augmentation levels can be determined by monitoring validation performance until improvement plateaus, indicating diminishing returns from additional augmentation.</p>

<h2 id="architecture">Architectural Approaches to Overfitting Prevention</h2>

<p>Modern neural network architectures incorporate design elements that inherently reduce overfitting risk.</p>

<h3>1. Residual Connections</h3>

<p>ResNet introduced skip connections that enable training of very deep networks. The mathematical formulation allows the network to learn residual functions F(x) = H(x) - x rather than complete transformations H(x).</p>

<p>This approach simplifies optimization and reduces overfitting by providing direct paths for gradient flow. Empirical evidence shows that residual connections enable successful training of networks with 50+ layers, while vanilla deep networks without such connections often fail to converge effectively.</p>

<h3>2. Attention Mechanisms</h3>

<p>Attention mechanisms enable models to focus on relevant input components through the formulation:</p>

<p><em>Attention(Q,K,V) = softmax(QK^T/√d_k)V</em></p>

<p>Attention mechanisms promote generalization by creating sparse, interpretable representations. The model learns to identify and focus on relevant features rather than memorizing entire input patterns.</p>

<p>Comparative studies demonstrate the effectiveness of attention-based models. A text classification model using BERT with attention achieved 94.2% accuracy on new domains, while a vanilla LSTM achieved 78.7%. The attention mechanism facilitated focus on domain-invariant features, improving cross-domain generalization.</p>

<h3>3. Batch Normalization</h3>

<p>Batch normalization normalizes activations within each mini-batch, reducing internal covariate shift. This enables the use of higher learning rates and provides regularization effects.</p>

<p>Implementation typically involves applying batch normalization after each linear or convolutional layer. Empirical studies report 2-3x improvements in training speed and enhanced generalization performance when batch normalization is properly integrated into network architectures.</p>

<h2 id="transfer">Transfer Learning Approaches</h2>

<p>Transfer learning leverages pre-trained models to address overfitting challenges in scenarios with limited training data.</p>

<h3>Foundation Models</h3>

<p>Models like GPT, BERT, and CLIP are pre-trained on extensive datasets and can be fine-tuned for specific tasks with minimal additional data. This approach significantly reduces overfitting risk by starting from well-optimized representations.</p>

<p>Empirical evidence demonstrates the effectiveness of transfer learning. A sentiment analysis system using BERT with 1,000 training examples achieved 92.3% accuracy, while training from scratch with the same data achieved 67.8%. The pre-trained representations provided robust feature extraction capabilities.</p>

<h3>Fine-tuning Strategies</h3>

<p><strong>1. Progressive Unfreezing:</strong> Begin by fine-tuning only the final layer, then gradually unfreeze earlier layers. This approach prevents catastrophic forgetting of pre-trained knowledge.</p>

<p><strong>2. Differential Learning Rates:</strong> Apply higher learning rates (10^-3) to later layers and lower rates (10^-5) to earlier layers. Early layers typically contain general features that require minimal modification.</p>

<p><strong>3. Adapter-based Methods:</strong> Insert small trainable modules while maintaining the base model in a frozen state. This reduces the effective parameter count and associated overfitting risk.</p>

<p>Comparative studies show that adapter-based fine-tuning can achieve superior generalization. A customer service chatbot using GPT-3 with adapter fine-tuning achieved 89.4% accuracy on new queries, while full fine-tuning achieved 84.1% due to overfitting.</p>

<h2 id="hyperparameters">Hyperparameter Optimization</h2>

<p>Hyperparameter selection significantly influences model training dynamics and generalization performance.</p>

<h3>Learning Rate Selection</h3>

<p>Learning rate represents a critical hyperparameter that directly affects training convergence and stability.</p>

<p><strong>Initial values:</strong> Begin with lr = 0.001 for Adam and lr = 0.01 for SGD. Adjust by dividing by 10 if training diverges or multiplying by 2 if training progresses slowly.</p>

<p><strong>Scheduling strategies:</strong> Learning rate scheduling can improve convergence. Cosine annealing with warm restarts has demonstrated effectiveness in various applications.</p>

<h3>Batch Size Considerations</h3>

<p>Batch size selection involves a trade-off between gradient stability and generalization performance. Larger batch sizes provide more stable gradients but may lead to sharp minima that generalize poorly.</p>

<p><strong>Recommended values:</strong> Use batch size = 32 for most tasks. For large models, consider batch size = 64 or 128 with gradient accumulation to maintain memory efficiency.</p>

<p>Empirical studies demonstrate this trade-off. A language model trained with batch size 256 achieved 91.2% training accuracy but only 83.7% production accuracy. The same model trained with batch size 32 achieved 89.1% training accuracy and 87.3% production accuracy, indicating better generalization.</p>

<h2 id="ensembling">Model Ensembling</h2>

<p>Ensemble methods combine multiple models to improve generalization performance through diversity and averaging effects.</p>

<h3>Ensemble Variance Reduction</h3>

<p>Ensembles reduce overfitting through diversity and averaging. The ensemble variance follows:</p>

<p><em>Var(ŷ_ensemble) = (1/n) * Var(ŷ_single) + (1-1/n) * Cov(ŷ_i, ŷ_j)</em></p>

<p>When models exhibit low covariance (high diversity), the ensemble variance becomes significantly lower than individual model variance, improving generalization performance.</p>

<h3>Ensemble Implementation Strategies</h3>

<p><strong>1. Snapshot Ensembles:</strong> Save model checkpoints at regular intervals (e.g., every 10 epochs) and ensemble their predictions. This approach typically yields 2-3% accuracy improvements with minimal computational overhead.</p>

<p><strong>2. Stochastic Weight Averaging (SWA):</strong> Average weights from multiple training runs or checkpoints. This technique smooths the loss landscape and improves generalization performance.</p>

<p><strong>3. Test Time Augmentation (TTA):</strong> Generate multiple augmented versions of test inputs and average the resulting predictions. This can improve accuracy by 1-2% without requiring additional training.</p>

<p>Empirical evidence demonstrates ensemble effectiveness. A medical imaging system using snapshot ensembles achieved 96.8% accuracy, while the best single model achieved 94.2%. The ensemble approach reduced overfitting and improved model robustness.</p>

<h2 id="conclusion">Summary and Future Directions</h2>

<p>Overfitting in deep neural networks represents a significant but manageable challenge in machine learning. The key insights from this analysis include:</p>

<p><strong>1. Systematic approach:</strong> Overfitting can be effectively addressed through systematic application of regularization techniques, appropriate architectural choices, and careful training procedures.</p>

<p><strong>2. Empirical validation:</strong> The effectiveness of various techniques has been demonstrated through empirical studies rather than theoretical speculation alone.</p>

<p><strong>3. Prevention strategies:</strong> Implementing overfitting prevention measures during model development is more effective than attempting to address overfitting after deployment.</p>

<p><strong>4. Continued evolution:</strong> The field continues to develop new techniques, including advanced attention mechanisms, foundation models, and improved regularization methods that further reduce overfitting risk.</p>

<p>Effective overfitting management requires understanding the underlying mechanisms and implementing appropriate mitigation strategies. The techniques discussed in this post provide a foundation for building robust, generalizable models.</p>

<p>Future research directions include developing more sophisticated regularization techniques, improving understanding of the relationship between architecture and generalization, and creating more efficient ensemble methods. The goal remains building models that generalize effectively to new data while maintaining computational efficiency.</p>

<nav class="paginav">
  <div class="paginav-header">
    <span class="title">Recommended Reading</span>
  </div>
  <a class="prev" href="https://kibromhft.github.io/posts/2022-11-27-vae/">
    <span class="subtitle">Disentangling the Latent Space: A Guide to Beta-VAE</span>
  </a>
  <a class="prev" href="https://kibromhft.github.io/posts/2023-01-19-coding/">
    <span class="subtitle">Coding AI: The New Literacy</span>
  </a>
  <a class="prev" href="https://kibromhft.github.io/posts/2022-11-20-causality_in_ML/">
    <span class="subtitle">Causality in Machine Learning</span>
  </a>
</nav>
  </div>

  <footer class="post-footer">
    <ul class="post-tags">
	  <li><a href="https://kibromhft.github.io/keywords/overfitting/">Overfitting</a></li>
      <li><a href="https://kibromhft.github.io/keywords/data/">Data</a></li>
      <li><a href="https://kibromhft.github.io/keywords/deep-neural-networks/">Deep Neural Networks</a></li>
	  <li><a href="https://kibromhft.github.io/keywords/transfer-learning/">Transfer Learning</a></li>
       <li><a href="https://kibromhft.github.io/keywords/regularization/">Regularization</a></li>
       <li><a href="https://kibromhft.github.io/keywords/hyperparameters/">Hyperparameters</a></li>
     </ul>



<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Causality in Machine Learning on twitter"
        href="https://twitter.com/intent/tweet/?text=Causality%in%Machine%Learning&amp;url=https%3a%2f%2fkibromhft.github.io%2fposts%2f2022-10-06-overfit_DNN%2f&amp;hashtags=autoencoder%2cgenerative-model%2cimage-generation">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Causality in Machine Learning on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fkibromhft.github.io%2fposts%2f2022-10-06-overfit_DNN%2f&amp;title=Causality%in%Machine%Learning&amp;summary=From%20Autoencoder%20to%20Beta-VAE&amp;source=https%3a%2f%2fkibromhft.github.io%2fposts%2f2022-10-06-overfit_DNN%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Causality in Machine Learning on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fkibromhft.github.io%2fposts%2f2022-10-06-overfit_DNN%2f&title=Causality%in%Machine%Learning">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
  

    <a target="_blank" rel="noopener noreferrer" aria-label="share Causality in Machine Learning on telegram"
        href="https://telegram.me/share/url?text=Causality%in%Machine%Learning&amp;url=https%3a%2f%2fkibromhft.github.io%2fposts%2f2022-10-06-overfit_DNN%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="https://kibromhft.github.io/">Kb&#39;s Blog</a></span>

</footer>

<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g" style="visibility: visible; opacity: 1;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
        <linearGradient id="grad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="rgb(192, 132, 224)"/>
            <stop offset="100%" stop-color="rgb(153, 0, 204)"/>
        </linearGradient>
        <path d="M12 6H0l6-6z" fill="url(#grad)"></path>
    </svg>
</a>

<script>
    // Optimized JavaScript with performance improvements
    document.addEventListener('DOMContentLoaded', function() {
        // Menu scroll position management
        const menu = document.getElementById('menu');
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
            menu.addEventListener('scroll', function() {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
            });
    }

        // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
                const id = this.getAttribute("href").substr(1);
                const targetElement = document.querySelector(`[id='${decodeURIComponent(id)}']`);
                
                if (targetElement) {
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                        targetElement.scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                        targetElement.scrollIntoView();
            }
                    
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
            }
        });
    });

        // Top link visibility management
        const topButton = document.getElementById("top-link");
        if (topButton) {
            const handleScroll = () => {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (scrollTop > 800) {
                    topButton.style.visibility = "visible";
                    topButton.style.opacity = "1";
        } else {
                    topButton.style.visibility = "hidden";
                    topButton.style.opacity = "0";
                }
            };
            
            window.addEventListener('scroll', handleScroll, { passive: true });
        }

        // Theme toggle functionality
        const themeToggle = document.getElementById("theme-toggle");
        if (themeToggle) {
            themeToggle.addEventListener("click", () => {
                const isDark = document.body.classList.contains("dark");
                document.body.classList.toggle('dark');
                localStorage.setItem("pref-theme", isDark ? 'light' : 'dark');
            });
        }
    });
</script>
<script>
    // Enhanced copy code functionality with better positioning
    document.addEventListener('DOMContentLoaded', function() {
        const copyButtons = new Map();
        
        // Find all code blocks (both pre>code and standalone code)
        const codeBlocks = document.querySelectorAll('pre > code, pre code');
        
        codeBlocks.forEach((codeblock, index) => {
            // Find the pre element that contains this code
            let preElement = codeblock.closest('pre');
            if (!preElement) return;

        const copybutton = document.createElement('button');
            
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';
            copybutton.setAttribute('aria-label', 'Copy code to clipboard');
            copybutton.setAttribute('title', 'Copy code to clipboard');
            copybutton.setAttribute('data-code-index', index);

            const copyingDone = () => {
            copybutton.innerText = 'copied!';
                copybutton.setAttribute('aria-label', 'Code copied!');
                copybutton.style.background = 'var(--primary-hover)';
            setTimeout(() => {
                copybutton.innerText = 'copy';
                    copybutton.setAttribute('aria-label', 'Copy code to clipboard');
                    copybutton.style.background = '';
            }, 2000);
            };

            copybutton.addEventListener('click', async (e) => {
                e.preventDefault();
                e.stopPropagation();
                
                try {
            if ('clipboard' in navigator) {
                        await navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                    } else {
                        // Fallback for older browsers
            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
                        
            try {
                document.execCommand('copy');
                copyingDone();
                        } catch (err) {
                            console.warn('Copy failed:', err);
                        }
                        
            selection.removeRange(range);
                    }
                } catch (err) {
                    console.warn('Copy failed:', err);
                    // Show error feedback
                    copybutton.innerText = 'error';
                    copybutton.style.background = '#dc3545';
                    setTimeout(() => {
                        copybutton.innerText = 'copy';
                        copybutton.style.background = '';
                    }, 2000);
                }
            });

            // Always place copy button in the pre element
            if (preElement) {
                preElement.appendChild(copybutton);
                copyButtons.set(copybutton, preElement);
                
                // Ensure the pre element has relative positioning
                preElement.style.position = 'relative';
            }
        });
        
        // Log for debugging
        console.log(`Added ${copyButtons.size} copy buttons to code blocks`);
    });

    // Reading Progress Bar
    const progressBar = document.getElementById('reading-progress');
    if (progressBar) {
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset;
            const docHeight = document.body.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            progressBar.style.width = scrollPercent + '%';
        });
    }
</script>
<script>
    // Mobile dropdown functionality
    document.addEventListener('DOMContentLoaded', function() {
        // Check if device is touch-based (mobile) or small screen
        const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        const isSmallScreen = window.innerWidth <= 768;
        
        if (isTouchDevice || isSmallScreen) {
            const dropdowns = document.querySelectorAll('.dropdown');
            
            // Disable hover behavior on mobile by removing hover styles
            dropdowns.forEach(dropdown => {
                const menu = dropdown.querySelector('.dropdown-menu');
                if (menu) {
                    // Force mobile styles
                    menu.style.transition = 'all 0.2s ease';
                }
            });
            
            dropdowns.forEach(dropdown => {
                const toggle = dropdown.querySelector('.dropdown-toggle');
                const menu = dropdown.querySelector('.dropdown-menu');
                
                if (toggle && menu) {
                    // Add click event to toggle dropdown
                    toggle.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        // Close all other dropdowns
                        dropdowns.forEach(otherDropdown => {
                            if (otherDropdown !== dropdown) {
                                otherDropdown.classList.remove('dropdown-open');
                            }
                        });
                        
                        // Toggle current dropdown
                        const isOpen = dropdown.classList.contains('dropdown-open');
                        if (isOpen) {
                            dropdown.classList.remove('dropdown-open');
        } else {
                            dropdown.classList.add('dropdown-open');
                        }
                    });
                }
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                // Don't close if clicking on the dropdown toggle
                if (e.target.closest('.dropdown-toggle')) {
                    return;
                }
                
                // Close if clicking outside dropdown
                if (!e.target.closest('.dropdown')) {
                    dropdowns.forEach(dropdown => {
                        dropdown.classList.remove('dropdown-open');
                    });
                }
            });
            
            // Close dropdown when pressing Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    dropdowns.forEach(dropdown => {
                        dropdown.classList.remove('dropdown-open');
                    });
                }
            });
            
            // Close dropdown when window is resized
            window.addEventListener('resize', function() {
                dropdowns.forEach(dropdown => {
                    dropdown.classList.remove('dropdown-open');
                });
            });
        }
    });

    // Animate title underline on page load
    document.addEventListener('DOMContentLoaded', function() {
        const postTitle = document.querySelector('.post-title');
        if (postTitle) {
            // Add a small delay for smooth animation
            setTimeout(() => {
                postTitle.classList.add('loaded');
            }, 300);
        }
    });
</script>
<script>
    // This script is now handled by the enhanced copy code functionality above
</script>
</body>

</html>
